<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>WACS_ExternalDisplay: C:/Documents and Settings/humphjc1/My Documents/wacs/WACS_ExternalDisplay/WACS_ExternalDisplay/Logger.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">WACS_ExternalDisplay</div>
   <div id="projectbrief">3D External Display for WACS</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">C:/Documents and Settings/humphjc1/My Documents/wacs/WACS_ExternalDisplay/WACS_ExternalDisplay/Logger.h</div>  </div>
</div>
<div class="contents">
<div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef LOGGER_H</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define LOGGER_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 <span class="preprocessor">#include &quot;stdafx.h&quot;</span>
<a name="l00005"></a>00005 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;list&gt;</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="keyword">using namespace </span>std;
<a name="l00010"></a>00010 <span class="keyword">class </span><a class="code" href="class_logger.html" title="Object to log all user actions/errors to a log file.">Logger</a>;
<a name="l00011"></a>00011 
<a name="l00020"></a><a class="code" href="struct_logger_thread_params.html">00020</a> <span class="keyword">struct </span><a class="code" href="struct_logger_thread_params.html" title="Object to pass required objects into write thread.">LoggerThreadParams</a>
<a name="l00021"></a>00021 {
<a name="l00025"></a><a class="code" href="struct_logger_thread_params.html#aef76fe61447882120fbb25e02f9d03f8">00025</a>         <a class="code" href="struct_logger_thread_params.html#aef76fe61447882120fbb25e02f9d03f8" title="Constructor.">LoggerThreadParams</a> () {}
<a name="l00026"></a>00026 
<a name="l00027"></a><a class="code" href="struct_logger_thread_params.html#ab27ff4270e99ddbc9c77c56a739f3e20">00027</a>         <a class="code" href="class_logger.html" title="Object to log all user actions/errors to a log file.">Logger</a>* <a class="code" href="struct_logger_thread_params.html#ab27ff4270e99ddbc9c77c56a739f3e20" title="Pointer to Logger object to run.">m_Logger</a>; 
<a name="l00028"></a><a class="code" href="struct_logger_thread_params.html#a9ba1826fd0f31f34a3cff91e772ebee3">00028</a>         <span class="keywordtype">bool</span>* <a class="code" href="struct_logger_thread_params.html#a9ba1826fd0f31f34a3cff91e772ebee3" title="If true, thread should be killed.">m_KillThread</a>; 
<a name="l00029"></a><a class="code" href="struct_logger_thread_params.html#ac9663b1ac1300e8c8f4721c5f57c8742">00029</a>         <span class="keywordtype">bool</span>* <a class="code" href="struct_logger_thread_params.html#ac9663b1ac1300e8c8f4721c5f57c8742" title="If true, thread has been killed.">m_ThreadDone</a>; 
<a name="l00030"></a>00030 };
<a name="l00031"></a>00031 
<a name="l00040"></a><a class="code" href="class_logger.html">00040</a> <span class="keyword">class </span><a class="code" href="class_logger.html" title="Object to log all user actions/errors to a log file.">Logger</a>
<a name="l00041"></a>00041 {
<a name="l00042"></a>00042         <span class="keyword">public</span>:
<a name="l00043"></a>00043 
<a name="l00050"></a>00050                 <span class="keyword">static</span> <a class="code" href="class_logger.html" title="Object to log all user actions/errors to a log file.">Logger</a>* getInstance (<span class="keywordtype">string</span> filename);
<a name="l00051"></a>00051 
<a name="l00058"></a>00058                 <span class="keyword">static</span> <a class="code" href="class_logger.html" title="Object to log all user actions/errors to a log file.">Logger</a>* getInstance ();
<a name="l00059"></a>00059 
<a name="l00063"></a>00063                 <span class="keyword">static</span> <span class="keywordtype">void</span> releaseInstance ();
<a name="l00064"></a>00064 
<a name="l00068"></a>00068                 ~<a class="code" href="class_logger.html" title="Object to log all user actions/errors to a log file.">Logger</a> ();
<a name="l00069"></a>00069 
<a name="l00073"></a>00073                 <span class="keywordtype">void</span> close ();
<a name="l00074"></a>00074                 
<a name="l00080"></a>00080                 <span class="keywordtype">void</span> logMessage (<span class="keywordtype">string</span> message);
<a name="l00081"></a>00081 
<a name="l00087"></a>00087                 <span class="keywordtype">void</span> logMessage (<span class="keywordtype">char</span>* message);
<a name="l00088"></a>00088 
<a name="l00094"></a>00094                 <span class="keywordtype">void</span> immediateLogMessage (<span class="keywordtype">char</span>* message);
<a name="l00095"></a>00095 
<a name="l00100"></a>00100                 <span class="keywordtype">void</span> setListboxWnd (HWND window);
<a name="l00101"></a>00101 
<a name="l00102"></a>00102         <span class="keyword">private</span>:
<a name="l00103"></a>00103 
<a name="l00109"></a>00109                 <a class="code" href="class_logger.html" title="Object to log all user actions/errors to a log file.">Logger</a> (<span class="keywordtype">string</span> filename);
<a name="l00110"></a>00110 
<a name="l00115"></a>00115                 <span class="keywordtype">void</span> startNewLog ();
<a name="l00116"></a>00116 
<a name="l00121"></a><a class="code" href="class_logger.html#a500fbb10633823816dddf2c02399bd12">00121</a>                 FILE* <a class="code" href="class_logger.html#a500fbb10633823816dddf2c02399bd12" title="Returns the handle to the current log file.">getLogFile</a> () {<span class="keywordflow">return</span> m_LogFile;}
<a name="l00122"></a>00122 
<a name="l00127"></a><a class="code" href="class_logger.html#a8c61058413834c09b30308a6dee2254a">00127</a>                 list &lt;string&gt;* <a class="code" href="class_logger.html#a8c61058413834c09b30308a6dee2254a" title="Returns a pointer to the log queue.">getQueuePointer</a> () {<span class="keywordflow">return</span> &amp;m_LogQueue;}
<a name="l00128"></a>00128 
<a name="l00135"></a>00135                 <span class="keyword">static</span> <span class="keywordtype">void</span> writeToFile (<a class="code" href="class_logger.html" title="Object to log all user actions/errors to a log file.">Logger</a>* logger, <span class="keywordtype">char</span>* logMessage);
<a name="l00136"></a>00136 
<a name="l00141"></a><a class="code" href="class_logger.html#a141ece1d87b15875dfdc08061e45c597">00141</a>                 <span class="keywordtype">int</span> <a class="code" href="class_logger.html#a141ece1d87b15875dfdc08061e45c597" title="Returns the total number of bytes logged to the current log file.">getTotalBytesLogged</a> () {<span class="keywordflow">return</span> totalBytesLogged;}
<a name="l00142"></a>00142 
<a name="l00147"></a><a class="code" href="class_logger.html#a626bc2d1ba4cd32c6075a03ed6c9ee60">00147</a>                 <span class="keywordtype">void</span> <a class="code" href="class_logger.html#a626bc2d1ba4cd32c6075a03ed6c9ee60" title="Adds the parameter value to the running count of written bytes.">addToTotalBytesLogged</a> (<span class="keywordtype">int</span> addBytes) {totalBytesLogged += addBytes;}
<a name="l00148"></a>00148 
<a name="l00152"></a><a class="code" href="class_logger.html#a86aa66ebcf4c291967e183c99d65dc27">00152</a>                 <span class="keywordtype">int</span> <a class="code" href="class_logger.html#a86aa66ebcf4c291967e183c99d65dc27" title="Number of bytes logged to the current file.">totalBytesLogged</a>;
<a name="l00153"></a>00153 
<a name="l00157"></a><a class="code" href="class_logger.html#add521d8f1e6b2cf5074f1d4c02127736">00157</a>                 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="class_logger.html#add521d8f1e6b2cf5074f1d4c02127736" title="Maximum number of bytes to log to each file.">maxLogFileSize</a>;
<a name="l00158"></a>00158 
<a name="l00162"></a><a class="code" href="class_logger.html#a9818e071f2bba3d51d28781de9b80e4b">00162</a>                 <span class="keyword">static</span> <a class="code" href="class_logger.html" title="Object to log all user actions/errors to a log file.">Logger</a>* <a class="code" href="class_logger.html#a9818e071f2bba3d51d28781de9b80e4b" title="Singleton instance of this class.">m_Logger</a>;
<a name="l00163"></a>00163 
<a name="l00167"></a><a class="code" href="class_logger.html#ae1edce714a5ff78f0db68554ef87fc64">00167</a>                 <span class="keywordtype">string</span> <a class="code" href="class_logger.html#ae1edce714a5ff78f0db68554ef87fc64" title="Filename of log.">m_Filename</a>;
<a name="l00168"></a>00168 
<a name="l00172"></a><a class="code" href="class_logger.html#af5557c3fb29120e5eb8303b3f06f1219">00172</a>                 FILE* <a class="code" href="class_logger.html#af5557c3fb29120e5eb8303b3f06f1219" title="File pointer to log.">m_LogFile</a>;
<a name="l00173"></a>00173 
<a name="l00177"></a><a class="code" href="class_logger.html#af6934b5607ef66ab1a80cd2c43557e7d">00177</a>                 <span class="keyword">static</span> <span class="keywordtype">char</span>* <a class="code" href="class_logger.html#af6934b5607ef66ab1a80cd2c43557e7d" title="Text to update when adding timestamp/etc to log message.">fullMessage</a>;
<a name="l00178"></a>00178 
<a name="l00182"></a><a class="code" href="class_logger.html#ada328a5074245919b6e587bbe192d0b3">00182</a>                 <span class="keywordtype">bool</span> <a class="code" href="class_logger.html#ada328a5074245919b6e587bbe192d0b3" title="Boolean status of log - false once close has been called.">m_LogOpen</a>;
<a name="l00183"></a>00183 
<a name="l00187"></a><a class="code" href="class_logger.html#aa5086e90b974c0eda04acfdbdb5b2be7">00187</a>                 <span class="keywordtype">bool</span> <a class="code" href="class_logger.html#aa5086e90b974c0eda04acfdbdb5b2be7" title="If true, thread should stop writing and shutdown.">m_KillThread</a>;
<a name="l00188"></a>00188 
<a name="l00192"></a><a class="code" href="class_logger.html#a6a4c2e1e67f2b8f85dbdcec35f83c85f">00192</a>                 <span class="keywordtype">bool</span> <a class="code" href="class_logger.html#a6a4c2e1e67f2b8f85dbdcec35f83c85f" title="If true, thread has finished its loop.">m_ThreadDone</a>;
<a name="l00193"></a>00193 
<a name="l00197"></a><a class="code" href="class_logger.html#a55ff168a2ad3a40fdfd48b70ea63c416">00197</a>                 list &lt;string&gt; <a class="code" href="class_logger.html#a55ff168a2ad3a40fdfd48b70ea63c416" title="Queue of messages to write to log.">m_LogQueue</a>;
<a name="l00198"></a>00198 
<a name="l00202"></a><a class="code" href="class_logger.html#a2dbf94ee9b3fff1716ae7773a371c83b">00202</a>                 <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="class_logger.html#a2dbf94ee9b3fff1716ae7773a371c83b" title="Maximum size of log messages.">maxLogMessageSize</a>;
<a name="l00203"></a>00203 
<a name="l00207"></a><a class="code" href="class_logger.html#ae481610560de4be304b49fd6798065f7">00207</a>                 <a class="code" href="struct_logger_thread_params.html" title="Object to pass required objects into write thread.">LoggerThreadParams</a>* <a class="code" href="class_logger.html#ae481610560de4be304b49fd6798065f7" title="Parameters to send to thread function.">threadParams</a>;
<a name="l00208"></a>00208 
<a name="l00212"></a><a class="code" href="class_logger.html#ad664da49d002ee7ff0b8efa7ad92729d">00212</a>                 HANDLE <a class="code" href="class_logger.html#ad664da49d002ee7ff0b8efa7ad92729d" title="Internal thread to write messages to log.">m_LogThread</a>;
<a name="l00213"></a>00213 
<a name="l00217"></a>00217                 <span class="keyword">static</span> <span class="keywordtype">void</span> writeThread (<span class="keywordtype">void</span>* params);
<a name="l00218"></a>00218 
<a name="l00222"></a><a class="code" href="class_logger.html#ab59fb2de62d8f5bcf7b188c295e17094">00222</a>                 <span class="keyword">static</span> CRITICAL_SECTION <a class="code" href="class_logger.html#ab59fb2de62d8f5bcf7b188c295e17094" title="Locking object for writing.">writeLock</a>;
<a name="l00223"></a>00223 
<a name="l00227"></a><a class="code" href="class_logger.html#a767dd30eb9aa7a5fd3c689ad0845616e">00227</a>                 <span class="keyword">static</span> CRITICAL_SECTION <a class="code" href="class_logger.html#a767dd30eb9aa7a5fd3c689ad0845616e" title="Locking object for queue.">queueLock</a>;
<a name="l00228"></a>00228 
<a name="l00232"></a><a class="code" href="class_logger.html#a184c4dafc41ef01ccf3eb24e0f1ef29f">00232</a>                 <span class="keyword">static</span> CRITICAL_SECTION <a class="code" href="class_logger.html#a184c4dafc41ef01ccf3eb24e0f1ef29f" title="Locking object for list box.">listBoxLock</a>;
<a name="l00233"></a>00233 
<a name="l00237"></a><a class="code" href="class_logger.html#a508b72da07e8320747d1cdd9103d242e">00237</a>                 HWND <a class="code" href="class_logger.html#a508b72da07e8320747d1cdd9103d242e" title="Handle to listbox window to log to (in addition to file)">m_ListBoxWnd</a>;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239 };
<a name="l00240"></a>00240 
<a name="l00241"></a>00241 <span class="preprocessor">#endif</span>
</pre></div></div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Thu May 5 2011 15:25:31 for WACS_ExternalDisplay by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
